<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script>
    // Initialize the map and set its view to France
    var map = L.map('map').setView([46.603354, 1.888334], 6); // France coordinates

    // Add OpenStreetMap tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    // Fetch location data from JSON file
    fetch('locations.json')
        .then(response => response.json())
        .then(locations => {
            // Loop through the locations and add markers
            locations.forEach(function(location) {
                var marker = L.marker([location.lat, location.lng]).addTo(map);
                
                // Create the popup content
                var popupContent = 
                    '<div class="popup-content">' +
                        '<div class="popup-title">' + location.name + '</div>' +
                        '<div class="popup-description">' + location.description + '</div>' +
                        '<iframe class="popup-iframe" src="' + location.sketchfabUrl + '" frameborder="0" allow="autoplay; fullscreen; vr" allowfullscreen></iframe>' +
                    '</div>';
                
                // Bind the popup content to the marker
                marker.bindPopup(popupContent);
            });
        })
        .catch(error => console.error('Error fetching the locations:', error));
</script>
